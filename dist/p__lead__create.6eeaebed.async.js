(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{cmSx:function(e,a,t){"use strict";t.r(a);var n=t("wx14"),l=(t("DZo9"),t("8z0m")),r=(t("+L6B"),t("2/Rp")),c=(t("7Kak"),t("9yH6")),o=(t("/zsF"),t("PArb")),s=(t("T2oS"),t("W9HT")),i=(t("y8nQ"),t("Vl3Y")),m=t("o0o1"),p=t.n(m),u=t("KQm4"),d=t("HaE+"),h=t("VTBJ"),C=(t("miYZ"),t("tsqr")),f=t("1OyB"),y=t("vuIU"),E=t("Ji7U"),N=t("LK+K"),w=(t("5NDa"),t("5rEg")),g=(t("OaEy"),t("2fM7")),b=t("q1tI"),v=t.n(b),k=t("9kvl"),R=t("sEfC"),F=t.n(R),_=t("34ay"),O=t("xGkL"),I=t.n(O),V=g["a"].Option,S=w["a"].TextArea,j={labelCol:{span:8},wrappercol:{span:16}},x=function(e){return{required:"".concat(e," is required!")}},q=function(e,a,t){return e?a:t},T=function(e){Object(E["a"])(t,e);var a=Object(N["a"])(t);function t(e){var n;return Object(f["a"])(this,t),n=a.call(this,e),n.onUpload={name:"file",action:"http://api-harmonia.geekup.io/file",headers:{Authorization:"Bearer ".concat(Object(_["b"])())},props:n.props,onChange:function(e){"done"===e.file.status?(C["a"].success("".concat(e.file.name," file uploaded successfully")),this.props.dispatch({type:"lead/saveListFile",payload:e.fileList})):"error"===e.file.status&&C["a"].error("".concat(e.file.name," file upload failed."))}},n.onFinish=function(e){n.props.dispatch({type:"lead/fullCreate",payload:Object(h["a"])({},e,{listFile:n.props.lead.listFile})})},n.fetchCompany=function(e){n.props.dispatch({type:"lead/handleSearchChange",payload:{value:n.props.lead.searchValue,listCompany:[]}}),n.props.dispatch({type:"lead/searchCompanyByName",payload:{value:e}}),n.newCompanyName=e},n.fetchContact=function(e){n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:n.props.lead.searchContactValue,listContact:[]}}),n.props.dispatch({type:"lead/searchContactByName",payload:{value:e}}),n.newContactName=e,n.newRelationName=e},n.createCompany=Object(d["a"])(p.a.mark((function e(){var a,t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.props.dispatch({type:"company/quickCreateCompany",payload:{name:n.newCompanyName}});case 2:a=e.sent,t=n.formRef.current.getFieldValue("company"),t||(t=[]),t.push(a),n.formRef.current.setFieldsValue({company:Object(u["a"])(t)}),n.newCompanyName="";case 8:case"end":return e.stop()}}),e)}))),n.createContact=Object(d["a"])(p.a.mark((function e(){var a,t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.props.dispatch({type:"contact/quickCreateContact",payload:{name:n.newContactName}});case 2:a=e.sent,t=n.formRef.current.getFieldValue("contact"),t||(t=[]),t.push(a),n.formRef.current.setFieldsValue({contact:Object(u["a"])(t)}),n.newContactName="";case 8:case"end":return e.stop()}}),e)}))),n.createRelation=Object(d["a"])(p.a.mark((function e(){var a,t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.props.dispatch({type:"contact/quickCreateContact",payload:{name:n.newRelationName}});case 2:a=e.sent,t=n.formRef.current.getFieldValue("relation"),t||(t=[]),t.push(a),n.formRef.current.setFieldsValue({relation:Object(u["a"])(t)}),n.newRelationName="";case 8:case"end":return e.stop()}}),e)}))),n.handleChange=function(e){n.newCompanyName="",n.props.dispatch({type:"lead/handleSearchChange",payload:{value:e,listCompany:[]}})},n.handleContactChange=function(e){n.newContactName="",n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:e,listContact:[]}})},n.handleRelationChange=function(e){n.newRelationName="",n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:e,listContact:[]}})},n.fetchCompany=F()(n.fetchCompany,1e3),n.fetchContact=F()(n.fetchContact,1e3),n.newCompanyName="",n.newContactName="",n.newRelationName="",n.formRef=v.a.createRef(),n}return Object(y["a"])(t,[{key:"render",value:function(){var e=this.props.lead,a=e.searchValue,t=e.listCompany,m=e.searchContactValue,p=e.listContact;return v.a.createElement("div",{className:I.a.main},v.a.createElement("div",{className:I.a.header},v.a.createElement("h2",{className:I.a.title}," CREATE LEAD")),v.a.createElement(i["a"],Object(n["a"])({},j,{ref:this.formRef,name:"nest-messages",onFinish:this.onFinish,validateMessages:x}),v.a.createElement(i["a"].Item,{name:"name",label:"Lead Name",rules:[{required:!0}]},v.a.createElement(w["a"],null)),v.a.createElement(i["a"].Item,{name:"company",label:"Company",rules:[{required:!0}]},v.a.createElement(g["a"],{labelInValue:!0,autoClearSearchValue:!0,maxTagCount:1,mode:"multiple",value:a,notFoundContent:q(this.props.fetchingCompany,v.a.createElement(s["a"],{size:"small"}),""!==this.newCompanyName?v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:I.a.resultNotFound},"No results found"),v.a.createElement(o["a"],{className:I.a.customDevider}),v.a.createElement("h3",{onClick:this.createCompany,className:I.a.createNewContact},'Create "',this.newCompanyName,'" as company')):""),filterOption:!1,onSearch:this.fetchCompany,onChange:this.handleChange},t.map((function(e){return v.a.createElement(V,{key:e.key},e.label)})))),v.a.createElement(i["a"].Item,{name:"contact",label:"Contact",rules:[{required:!0}]},v.a.createElement(g["a"],{labelInValue:!0,autoClearSearchValue:!0,mode:"multiple",value:m,notFoundContent:q(this.props.fetchingContact,v.a.createElement(s["a"],{size:"small"}),""!==this.newContactName?v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:I.a.resultNotFound},"No results found"),v.a.createElement(o["a"],{className:I.a.customDevider}),v.a.createElement("h3",{onClick:this.createContact,className:I.a.createNewContact},'Create "',this.newContactName,'" as contact')):""),filterOption:!1,onSearch:this.fetchContact,onChange:this.handleContactChange},p.map((function(e){return v.a.createElement(V,{key:e.key},e.label)})))),v.a.createElement(i["a"].Item,{name:"relation",label:"Related To"},v.a.createElement(g["a"],{mode:"multiple",autoClearSearchValue:!0,labelInValue:!0,value:m,notFoundContent:q(this.props.fetchingContact,v.a.createElement(s["a"],{size:"small"}),""!==this.newRelationName?v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:I.a.resultNotFound},"No results found"),v.a.createElement(o["a"],{className:I.a.customDevider}),v.a.createElement("h3",{onClick:this.createRelation,className:I.a.createNewContact},'Create "',this.newRelationName,'" as contact')):""),filterOption:!1,onSearch:this.fetchContact,onChange:this.handleRelationChange},p.map((function(e){return v.a.createElement(V,{key:e.key},e.label)})))),v.a.createElement(i["a"].Item,{name:"tag",label:"Tag"},v.a.createElement(g["a"],{mode:"tags",style:{width:"100%"},labelInValue:!0,tokenSeparators:[","]},v.a.createElement(V,{key:"Coffee shop"},"Coffee shop"),v.a.createElement(V,{key:"Loyalty"},"Loyalty"),v.a.createElement(V,{key:"Technical"},"Technical"),v.a.createElement(V,{key:"Financial"},"Financial"),v.a.createElement(V,{key:"Stock"},"Stock"),v.a.createElement(V,{key:"Mobile app"},"Mobile app"))),v.a.createElement(i["a"].Item,{name:"rank",label:"Rank",rules:[{required:!0}]},v.a.createElement(c["default"].Group,{className:I.a.customRadioRank},v.a.createElement(c["default"],{value:"0"},"A"),v.a.createElement(c["default"],{value:"1"},"B"),v.a.createElement(c["default"],{value:"2"},"C"),v.a.createElement(c["default"],{value:"3"},"D"))),v.a.createElement(i["a"].Item,{name:"reason",label:"Explanation",rules:[{required:!0}]},v.a.createElement(S,{autoSize:{minRows:2,maxRows:6}})),v.a.createElement(i["a"].Item,{name:"description",label:"Description",rules:[{required:!0}]},v.a.createElement(S,{rows:4})),v.a.createElement(i["a"].Item,{name:"note",label:"Note",rules:[{required:!0}]},v.a.createElement(S,{rows:4})),v.a.createElement(i["a"].Item,{name:"brief",label:"Brief"},v.a.createElement(l["a"],this.onUpload,v.a.createElement(r["a"],null,"Click to Upload"))),v.a.createElement(i["a"].Item,{wrapperCol:Object(h["a"])({},j.wrappercol,{offset:8})},v.a.createElement(r["a"],{type:"primary",htmlType:"submit",loading:this.props.submitting},"Create"))))}}]),t}(v.a.Component);a["default"]=Object(k["a"])((function(e){var a=e.lead,t=e.loading,n=e.searchModel;return{lead:a,searchModel:n,submitting:t.effects["lead/fullCreate"],fetchingCompany:t.effects["lead/searchCompanyByName"],fetchingContact:t.effects["lead/searchContactByName"]}}))(T)},xGkL:function(e,a,t){e.exports={main:"harmonia_-pages-lead-create-style_main",header:"harmonia_-pages-lead-create-style_header",title:"harmonia_-pages-lead-create-style_title",one:"harmonia_-pages-lead-create-style_one",two:"harmonia_-pages-lead-create-style_two",deletebutton:"harmonia_-pages-lead-create-style_deletebutton",doubleInput:"harmonia_-pages-lead-create-style_doubleInput",resultNotFound:"harmonia_-pages-lead-create-style_resultNotFound",createNewContact:"harmonia_-pages-lead-create-style_createNewContact",customDevider:"harmonia_-pages-lead-create-style_customDevider",customRadioRank:"harmonia_-pages-lead-create-style_customRadioRank"}}}]);