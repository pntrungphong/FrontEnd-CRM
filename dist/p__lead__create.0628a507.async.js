(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{cmSx:function(e,a,t){"use strict";t.r(a);var n=t("wx14"),l=(t("DZo9"),t("8z0m")),r=(t("+L6B"),t("2/Rp")),c=(t("T2oS"),t("W9HT")),o=(t("y8nQ"),t("Vl3Y")),i=t("VTBJ"),s=(t("miYZ"),t("tsqr")),p=t("1OyB"),m=t("vuIU"),h=t("Ji7U"),d=t("LK+K"),u=(t("5NDa"),t("5rEg")),C=(t("OaEy"),t("2fM7")),y=t("q1tI"),f=t.n(y),E=t("9kvl"),b=t("sEfC"),g=t.n(b),k=t("34ay"),v=t("xGkL"),S=t.n(v),w=C["a"].Option,I=u["a"].TextArea,O={labelCol:{span:8},wrappercol:{span:16}},_=function(e){return{required:"".concat(e," is required!")}},N=function(e){Object(h["a"])(t,e);var a=Object(d["a"])(t);function t(e){var n;return Object(p["a"])(this,t),n=a.call(this,e),n.onUpload={name:"file",action:"http://api-harmonia.geekup.io/file",headers:{Authorization:"Bearer ".concat(Object(k["b"])())},props:n.props,onChange:function(e){"done"===e.file.status?(s["a"].success("".concat(e.file.name," file uploaded successfully")),this.props.dispatch({type:"lead/saveListFile",payload:e.fileList})):"error"===e.file.status&&s["a"].error("".concat(e.file.name," file upload failed."))}},n.onFinish=function(e){n.props.dispatch({type:"lead/fullCreate",payload:Object(i["a"])({},e,{listFile:n.props.lead.listFile})})},n.fetchCompany=function(e){n.props.dispatch({type:"lead/handleSearchChange",payload:{value:n.props.lead.searchValue,listCompany:[]}}),n.props.dispatch({type:"lead/searchCompanyByName",payload:{value:e}})},n.fetchContact=function(e){n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:n.props.lead.searchContactValue,listContact:[]}}),n.props.dispatch({type:"lead/searchContactByName",payload:{value:e}})},n.createCompany=function(){E["b"].push({pathname:"/company/create"})},n.createContact=function(){E["b"].push({pathname:"/contact/create"})},n.handleChange=function(e){n.props.dispatch({type:"lead/handleSearchChange",payload:{value:e,listCompany:[]}})},n.handleContactChange=function(e){n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:e,listContact:[]}})},n.handleRelationChange=function(e){n.props.dispatch({type:"lead/handleSearchContactChange",payload:{value:e,listContact:[]}})},n.fetchCompany=g()(n.fetchCompany,1e3),n.fetchContact=g()(n.fetchContact,1e3),n}return Object(m["a"])(t,[{key:"render",value:function(){var e=this.props.lead,a=e.searchValue,t=e.listCompany,s=e.searchContactValue,p=e.listContact;return f.a.createElement("div",{className:S.a.main},f.a.createElement("div",{className:S.a.header},f.a.createElement("h2",{className:S.a.title}," CREATE LEAD")),f.a.createElement(o["a"],Object(n["a"])({},O,{name:"nest-messages",onFinish:this.onFinish,validateMessages:_}),f.a.createElement(o["a"].Item,{name:["lead","name"],label:"Name",rules:[{required:!0}]},f.a.createElement(u["a"],null)),f.a.createElement(o["a"].Item,{name:["lead","rank"],label:"Rank",rules:[{required:!0}]},f.a.createElement(C["a"],null,f.a.createElement(w,{value:"0"},"A"),f.a.createElement(w,{value:"1"},"B"),f.a.createElement(w,{value:"2"},"C"))),f.a.createElement(o["a"].Item,{name:["lead","company"],label:"Company",rules:[{required:!0}]},f.a.createElement(C["a"],{showSearch:!0,labelInValue:!0,tokenSeparators:[","],value:a,placeholder:"Select company",notFoundContent:this.props.fetchingCompany?f.a.createElement(c["a"],{size:"small"}):f.a.createElement("p",null,f.a.createElement(r["a"],{type:"text",onClick:this.createCompany},"Create Company")),filterOption:!1,onSearch:this.fetchCompany,onChange:this.handleChange},t.map((function(e){return f.a.createElement(w,{key:e.key},e.label)})))),f.a.createElement(o["a"].Item,{name:["lead","contact"],label:"Contact",rules:[{required:!0}]},f.a.createElement(C["a"],{mode:"multiple",labelInValue:!0,tokenSeparators:[","],value:s,placeholder:"Select contact",notFoundContent:this.props.fetchingContact?f.a.createElement(c["a"],{size:"small"}):f.a.createElement("p",null,f.a.createElement(r["a"],{type:"text",onClick:this.createContact},"New")),filterOption:!1,onSearch:this.fetchContact,onChange:this.handleContactChange},p.map((function(e){return f.a.createElement(w,{key:e.key},e.label)})))),f.a.createElement(o["a"].Item,{name:["lead","relation"],label:"Related To",rules:[{required:!0}]},f.a.createElement(C["a"],{mode:"multiple",labelInValue:!0,tokenSeparators:[","],value:s,notFoundContent:this.props.fetchingContact?f.a.createElement(c["a"],{size:"small"}):f.a.createElement("p",null,f.a.createElement(r["a"],{type:"text",onClick:this.createContact},"New")),filterOption:!1,onSearch:this.fetchContact,onChange:this.handleRelationChange},p.map((function(e){return f.a.createElement(w,{key:e.key},e.label)})))),f.a.createElement(o["a"].Item,{name:["lead","tag"],label:"Tag"},f.a.createElement(C["a"],{mode:"tags",style:{width:"100%"},labelInValue:!0,tokenSeparators:[","]},f.a.createElement(w,{key:"1"},"String"),f.a.createElement(w,{key:"6"},"tesst"))),f.a.createElement(o["a"].Item,{name:["lead","brief"],label:"Brief"},f.a.createElement(l["a"],this.onUpload,f.a.createElement(r["a"],null,"Click to Upload"))),f.a.createElement(o["a"].Item,{name:["lead","description"],label:"Description",rules:[{required:!0}]},f.a.createElement(I,{rows:4})),f.a.createElement(o["a"].Item,{wrapperCol:Object(i["a"])({},O.wrappercol,{offset:8})},f.a.createElement(r["a"],{type:"primary",htmlType:"submit",loading:this.props.submitting},"Submit"))))}}]),t}(f.a.Component);a["default"]=Object(E["a"])((function(e){var a=e.lead,t=e.loading,n=e.searchModel;return{lead:a,searchModel:n,submitting:t.effects["lead/fullCreate"],fetchingCompany:t.effects["lead/searchCompanyByName"],fetchingContact:t.effects["lead/searchContactByName"]}}))(N)},xGkL:function(e,a,t){e.exports={main:"harmonia_-pages-lead-create-style_main",header:"harmonia_-pages-lead-create-style_header",title:"harmonia_-pages-lead-create-style_title",one:"harmonia_-pages-lead-create-style_one",two:"harmonia_-pages-lead-create-style_two",deletebutton:"harmonia_-pages-lead-create-style_deletebutton",doubleInput:"harmonia_-pages-lead-create-style_doubleInput"}}}]);